# CI environment overrides
# Resource-constrained settings for CI testing
# Includes test secrets - NOT FOR PRODUCTION

global:
  # Allow single replica for CI
  allowSingleReplica: true
  
  # Disable security contexts for CI compatibility
  securityContext:
    enabled: false
  containerSecurityContext:
    enabled: false

# CI test secrets (not for production)
openopsEnv:
  OPS_ENCRYPTION_KEY: "0123456789abcdef0123456789abcdef"
  OPS_JWT_SECRET: "ci-jwt-secret-not-for-production"
  OPS_OPENOPS_ADMIN_PASSWORD: "ci-admin123"
  OPS_POSTGRES_PASSWORD: "ci-postgres123"
  OPS_ANALYTICS_ADMIN_PASSWORD: "ci-analytics123"
  ANALYTICS_POWERUSER_PASSWORD: "ci-poweruser123"

# Disable network policies for CI
networkPolicy:
  enabled: false

# Disable PDBs for single-node CI
app:
  replicas: 1
  podDisruptionBudget:
    enabled: false
  resources:
    requests:
      cpu: "200m"
      memory: "512Mi"
    limits:
      cpu: "500m"
      memory: "1Gi"

engine:
  replicas: 1
  podDisruptionBudget:
    enabled: false
  resources:
    requests:
      cpu: "150m"
      memory: "384Mi"
    limits:
      cpu: "300m"
      memory: "768Mi"

analytics:
  replicas: 1
  podDisruptionBudget:
    enabled: false
  resources:
    requests:
      cpu: "200m"
      memory: "512Mi"
    limits:
      cpu: "400m"
      memory: "1Gi"

postgres:
  replicas: 1
  resources:
    requests:
      cpu: "200m"
      memory: "512Mi"
    limits:
      cpu: "400m"
      memory: "1Gi"
  securityContext:
    enabled: false

redis:
  replicas: 1
  resources:
    requests:
      cpu: "50m"
      memory: "128Mi"
    limits:
      cpu: "150m"
      memory: "256Mi"
  securityContext:
    enabled: false

tables:
  replicas: 1
  podDisruptionBudget:
    enabled: false
  resources:
    requests:
      cpu: "250m"
      memory: "512Mi"
    limits:
      cpu: "500m"
      memory: "2Gi"

nginx:
  replicas: 1
  podDisruptionBudget:
    enabled: false
  # Disable rate limiting for CI
  rateLimiting:
    enabled: false
  resources:
    requests:
      cpu: "50m"
      memory: "64Mi"
    limits:
      cpu: "100m"
      memory: "128Mi"
